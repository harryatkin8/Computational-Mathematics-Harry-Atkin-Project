import numpy as np

def metropolis_hastings(n_samples, sigma):
    chain = np.zeros(n)
    chain[0] = 0.5 
    accepted_count = 0

    for i in range(n - 1):
        current_x = chain[i]
        proposal = np.random.normal(current_x, sigma)

        p_current = f(current_x)
        p_proposed = f(proposal)

        if p_current == 0: ratio = 1.0
        else: ratio = p_proposed / p_current

        if np.random.rand() < ratio:
            chain[i + 1] = proposal
            accepted_count += 1
        else:
            chain[i + 1] = current_x

    return chain, accepted_count / n
